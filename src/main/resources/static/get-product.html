<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<link rel="shortcut icon"
	href="https://cdn-icons-png.flaticon.com/512/7656/7656409.png">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<title>Product Details</title>
<style>
@import
	url('https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@1,800&display=swap')
	;

.navbar-brand {
	margin-left: 1rem;
	color: white !important;
	font-weight: 700;
	font-size: x-large !important;
}

.container-fluid-nav {
	width: 100%;
}

body {
	font-weight: 600 !important;
	overflow-x: hidden;
	font-family: 'Noto Serif', serif;
}

table {
	width: 80%;
	border-collapse: collapse;
	margin: 20px 0px 0px 150px;
}

th, td {
	border: 1px solid #ddd;
	padding: 8px;
	text-align: left;
}

th {
	background-color: #198754;
	color: white;
}

label {
	margin-left: 127px;
	font-size: 20px;
	color: #198754;
}

input {
	border-radius: 7px;
	margin-left: 10px;
}

#getButton {
	padding: 5px 10px;
	font-size: 16px;
	font-weight: bold;
	cursor: pointer;
	color: white;
	background-color:#198754;
	border: none;
	border-radius: 5px;
	margin-left: 10px;
	margin-bottom:0px;
	margin-top:10px;
}

.fetch {
	margin: 15px;
	padding: 10px;
}
footer {
			position: absolute;
			bottom: 0px;
			width: 100%;
			height: 60px;
			font-size: 12px;
			background-color: #313131;

		}
</style>
<script>

	function showAlert(message, type = 'danger') {
    	const alertContainer = document.getElementById('alertContainer');
    	const alert = document.createElement('div');
    	alert.className = `alert alert-${type} alert-dismissible fade show mt-3`;
    	alert.role = 'alert';
    	alert.innerHTML = `
        	${message}
        	<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
   	 	`;
    	alertContainer.appendChild(alert);

    // Automatically remove the alert after 5 seconds
    	setTimeout(() => {
        	if (alert) alert.remove();
    	}, 5000);
	}
  	async function fetchProductById() {
      const productId = document.getElementById('productId').value;
      if (!productId || productId <= 0) {
        showAlert('Please enter a valid product ID.','warning');
        return;
      }

      try {
        	const response = await fetch(`http://localhost:8888/spring-boot-service/api/product/${productId}`, 
        		{
          		method: 'GET',
          		headers: {
          			'Accept': '*/*'
          		}
         	 });

        	if (!response.ok) {
        	  throw new Error(`product not found, status : ${response.statusText}`);
       	 	}

        	const product = await response.json();
        	products = [product];
        	currentPage = 1; // Reset to the first page
        	renderTable();
        	showAlert('Product details fetched successfully!', 'success');
      } catch (error) {
        console.error('Error:', error);
        showAlert('An error occurred while fetching product details.', 'danger');
      }
	}

  	function renderTable() {
      const tableBody = document.getElementById('productTableBody');
      tableBody.innerHTML = ''; // Clear existing data

      if (products.length === 0) {
          tableBody.innerHTML = `<tr><td colspan="7" class="text-center">No product found.</td></tr>`;
          return;
      } 
      products.forEach(product => {
          const row = `<tr>
              <td>${product.id}</td>
              <td>${product.name}</td>
              <td>${product.category}</td>
              <td>${product.brand}</td>
              <td>${product.description}</td>
              <td>${product.price}</td>
              <td>${product.quantity}</td>
          </tr>`;
          tableBody.innerHTML += row;
      });
  }
 // Disable pagination for single-product fetch
  function renderPagination() {
  	    const pagination = document.getElementById('pagination');
  	    pagination.innerHTML = ''; // Clear existing pagination
  }
  	
</script>
</head>
<body class="bg-light">
	<nav class="navbar sticky-top navbar-expand-md navbar-light bg-success">
		<div class="container-fluid-nav">
			<a class="navbar-brand" href="inventory.html"><i class="fa fa-align-center"
				aria-hidden="true"></i>&nbsp; Inventory</a>
		</div>
	</nav>

	<!-- Fetch Product by ID -->
	<div class="fetch">
		<label for="productId">Enter Product ID :</label> <input type="number"
			id="productId" placeholder="Product ID" required>
		<button id="getButton" onclick="fetchProductById()">Get
			Product Details</button>
	</div>
	<table>
		<thead>
			<tr>
					<th>ID</th>
					<th>Name</th>
					<th>Category</th>
					<th>Brand</th>
					<th>Description</th>
					<th>Price</th>
					<th>Quantity</th>
			</tr>
		</thead>
		<tbody id="productTableBody">
			<!-- Data will be dynamically inserted here -->
		</tbody>
	</table>
    
    <br>
	
	<!-- Alerts Container -->
    <div id="alertContainer" class="container"></div>
    
	<!-- Footer -->
	<footer class=" text-white text-center py-2">
		<p class="mb-1">Contact Us: <a href="mailto:inventory@support.com" class="text-white">inventory@support.com</a> | +91
			9705357424</p>
		<p class="mb-0">&copy; 2024 Inventory Management</p>
	</footer>
	
	<!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	

</body>
</html>
